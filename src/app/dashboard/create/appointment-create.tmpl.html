<!-- Client Create -->
<md-dialog class='appointmentDialog' aria-label="Create Appointment"  ng-cloak>


  <form role="form"
        name='add-appointment-form'
        ng-submit='vm.createAppointment(vm.newAppointment)'>

    <md-toolbar>
      <div class="md-toolbar-tools">

        <!---Close--->
        <md-button class="md-icon-button"
                   ng-click="vm.createAppointmentCancel()">
           <ng-md-icon icon="close" size="24"></ng-md-icon>
           <md-tooltip md-direction="bottom">
             Cancel and Close
           </md-tooltip>
        </md-button>

        <!-- Title -->
        <h2>Create Appointment</h2>
        <span flex></span>

        <!--- Delete--->
        <md-button type='button'
                   class="md-icon-button"
                   aria-label="Delete Client"
                   ng-show='vm.newAppointment.id && vm.newAppointment.id > 0'
                   ng-click='vm.deleteAppointment(vm.newAppointment)'>
          <md-tooltip md-direction="bottom">
            Delete Appointment
          </md-tooltip>
          <ng-md-icon icon="delete" size="24"></ng-md-icon>
        </md-button>

        <!---Save--->
        <md-button type='submit'
                   class="md-icon-button"
                   aria-label="Save">
                   <span ng-hide='vm.newAppointment.id && vm.newAppointment.id > 0'>Save</span>
                   <ng-md-icon ng-show='vm.newAppointment.id && vm.newAppointment.id > 0' icon="done" size="24"></ng-md-icon>
           <md-tooltip md-direction="bottom">
             Save
           </md-tooltip>
        </md-button>

      </div>
    </md-toolbar>

    <md-dialog-content>
      <div class="md-dialog-content">

        <!-- Title -->
        <div layout layout-sm="column">
          <md-input-container flex>
            <label>Title</label>
            <input ng-model='vm.newAppointment.title'
                   ng-required="true"
                   rm-focus>
          </md-input-container>
        </div>

        <!--Date-->
        <div layout="row" layout-wrap>
          <md-datepicker ng-model="vm.newAppointment.start"
                         ng-required="true"
                         md-placeholder="Date"></md-datepicker>
        </div>

        <!-- Appointment Time -->
        <div layout="row" layout-wrap>

          <md-input-container flex>
            <label>Time</label>

            <md-select ng-model="vm.newAppointment.startTime"
                       ng-model-options="{trackBy: '$value.id'}"
                       ng-required="true"
                       aria-label="Appointment Start Time">
              <md-option ng-value='time' ng-repeat="time in vm.bookingTimes">
                {{ time.name }}
              </md-option>
            </md-select>
          </md-input-container>

        </div>

        <!-- Dog -->
        <md-autocomplete
            ng-disabled="vm.isDisabled"
            md-selected-item="vm.selectedItem"
            md-search-text-change="vm.searchTextChange(vm.searchText)"
            md-search-text="vm.searchText"
            md-selected-item-change="vm.selectedItemChange(pet)"
            md-items="pet in vm.querySearch(vm.searchText)"
            md-item-text="pet.name"
            md-min-length="0"
            placeholder="Pets Name">
          <md-item-template>
            <span md-highlight-text="vm.searchText" md-highlight-flags="^i">{{pet.name}}</span>
          </md-item-template>
          <md-not-found>
            No states matching "{{vm.searchText}}" were found.
            <a ng-click="vm.newState(vm.searchText)">Create a new one!</a>
          </md-not-found>
        </md-autocomplete>

      </div>

    </md-dialog-content>

  </form>
</md-dialog>
